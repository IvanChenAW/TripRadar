<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>TripRadar Â· å¤šèªç‰ˆ (v5.9)</title>
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Ccircle cx='8' cy='8' r='8' fill='%232563eb'/%3E%3C/svg%3E"/>
<style>
:root{
  --brand:#2563eb; --panel:#f8fafc; --ink:#0f172a; --muted:#64748b;
  --ok:#16a34a; --warn:#d97706; --danger:#dc2626;
  --ok-bg:#ecfdf5; --warn-bg:#fff7ed; --danger-bg:#fef2f2; --info-bg:#eef2ff;
}
html,body{margin:0;padding:0;background:#f1f5f9;color:var(--ink);font:16px/1.5 "Noto Sans TC","Segoe UI",Roboto,"Noto Sans JP",sans-serif}
.wrap{max-width:1200px;margin:auto;padding:18px}
.header{background:linear-gradient(180deg,#1d4ed8,#60a5fa);color:#fff;padding:22px 18px 30px;position:relative}
.title{font-size:28px;font-weight:900}
.lang-switch{position:absolute;top:15px;right:18px;display:flex;gap:8px}
.lang-btn{background:#fff2;border:none;border-radius:8px;color:#fff;padding:4px 10px;cursor:pointer;font-weight:800}
.lang-btn.active{background:#fff;color:#1e3a8a}
.card{background:#fff;border-radius:14px;border:1px solid #e5e7eb;padding:14px;margin-top:10px}
.score-pill{border-radius:999px;font-weight:900;padding:10px 14px;color:#fff}
.score-pill.green{background:#22c55e}
.score-pill.blue{background:#3b82f6}
.score-pill.amber{background:#f59e0b}
.score-pill.red{background:#ef4444}
.tag{background:#f1f5f9;border-radius:999px;padding:8px 10px;font-weight:800;color:#1e293b}
.actBtn{border:none;border-radius:12px;background:#e2e8f0;padding:10px 12px;font-weight:800;cursor:pointer}
.actBtn.link{background:#eef2ff;color:#2563eb}
.modal-mask{position:fixed;inset:0;background:rgba(15,23,42,.45);display:none;align-items:center;justify-content:center;z-index:50}
.modal{background:#fff;border-radius:16px;width:min(720px,92vw);padding:18px}
.modal-close{border:none;background:#f1f5f9;border-radius:10px;padding:8px 10px;cursor:pointer}
</style>
</head>
<body>
  <div class="header">
    <div class="title" id="t-title">TripRadar</div>
    <div class="lang-switch">
      <button class="lang-btn active" data-lang="zh">ä¸­</button>
      <button class="lang-btn" data-lang="en">EN</button>
      <button class="lang-btn" data-lang="jp">æ—¥</button>
    </div>
  </div>

  <div class="wrap" id="content"></div>

  <!-- Modal -->
  <div id="modalMask" class="modal-mask">
    <div class="modal">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3 id="modalTitle">ç•¶åœ°ç‹€æ³</h3>
        <button class="modal-close" id="modalClose">âœ•</button>
      </div>
      <div id="modalText"></div>
    </div>
  </div>

<script>
/* èªè¨€åŒ… */
const I18N = {
  zh:{
    update:"æ›´æ–°æ™‚é–“", temp:"æ°£æº«", rain:"é™é›¨", uv:"ç´«å¤–ç·š", aqi:"ç©ºæ°£å“è³ª",
    score:"å»ºè­°æ—…éŠåˆ†æ•¸", map:"åœ°åœ–å°èˆª", pin:"ä¸€éµåˆ°é»", site:"å®˜æ–¹ç¶²ç«™", status:"ç•¶åœ°ç‹€æ³",
    rec:["éå¸¸é©åˆå‡ºéŠ","é©åˆå‡ºéŠ","å°šå¯å‡ºéŠ","å»ºè­°æ”¹æœŸ"],
    modal:{title:"ç•¶åœ°ç‹€æ³",disaster:"ç½å®³é¢¨éšª",traffic:"äº¤é€šç‹€æ³"}
  },
  en:{
    update:"Updated", temp:"Temp", rain:"Rain", uv:"UV", aqi:"Air Quality",
    score:"Trip Score", map:"Map", pin:"Go", site:"Official Site", status:"Status",
    rec:["Perfect for travel","Good for outing","Fair","Postpone recommended"],
    modal:{title:"Local Status",disaster:"Disaster Risk",traffic:"Traffic"}
  },
  jp:{
    update:"æ›´æ–°æ™‚é–“", temp:"æ°—æ¸©", rain:"é™æ°´ç¢ºç‡", uv:"UVæŒ‡æ•°", aqi:"ç©ºæ°—å“è³ª",
    score:"æ—…è¡Œã‚¹ã‚³ã‚¢", map:"åœ°å›³æ¡ˆå†…", pin:"ç›®çš„åœ°ã¸", site:"å…¬å¼ã‚µã‚¤ãƒˆ", status:"ç¾åœ°æƒ…å ±",
    rec:["æ—…è¡Œã«æœ€é©","ãŠå‡ºã‹ã‘æ—¥å’Œ","ã¾ã‚ã¾ã‚","å»¶æœŸã‚’æ¨å¥¨"],
    modal:{title:"ç¾åœ°æƒ…å ±",disaster:"ç½å®³ãƒªã‚¹ã‚¯",traffic:"äº¤é€šçŠ¶æ³"}
  }
};
let lang="zh";

/* æ¨¡æ“¬è³‡æ–™ */
const SPOTS=[
 {name:"é˜¿é‡Œå±±",region:"å˜‰ç¾©ç¸£",temp:20+Math.random()*6,rain:10+Math.random()*50,uv:5+Math.random()*5,aqi:30+Math.random()*70},
 {name:"æ—¥æœˆæ½­",region:"å—æŠ•ç¸£",temp:18+Math.random()*8,rain:15+Math.random()*50,uv:4+Math.random()*6,aqi:25+Math.random()*70},
 {name:"è¥¿æ‹‰é›…",region:"è‡ºå—å¸‚",temp:22+Math.random()*8,rain:5+Math.random()*40,uv:6+Math.random()*4,aqi:20+Math.random()*60}
];

/* å·¥å…· */
const $=q=>document.querySelector(q);
function lamp(s){
  if(s>=90)return{c:"green",t:0};
  if(s>=75)return{c:"blue",t:1};
  if(s>=60)return{c:"amber",t:2};
  return{c:"red",t:3};
}

/* Render */
function render(){
  const t=I18N[lang];
  $("#content").innerHTML=`
  <div>${t.update}ï¼š${new Date().toLocaleString()}</div>
  ${SPOTS.map(s=>{
    const score=Math.round(100-s.rain*0.5-(s.aqi-30)*0.3);
    const l=lamp(score);
    return`
    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div><b>${s.name}</b><br><span style="color:#64748b">${s.region}</span></div>
        <div class="score-pill ${l.c}">${t.score} ${score}</div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px">
        <div class="tag">ğŸŒ¡ï¸ ${t.temp} ${s.temp.toFixed(1)}Â°C</div>
        <div class="tag">ğŸŒ§ï¸ ${t.rain} ${Math.round(s.rain)}%</div>
        <div class="tag">â˜€ï¸ ${t.uv} ${Math.round(s.uv)}</div>
        <div class="tag">ğŸ«§ ${t.aqi} ${Math.round(s.aqi)}</div>
      </div>
      <div style="font-weight:800;margin-top:4px">ğŸ‘‰ ${t.rec[l.t]}</div>
      <div style="display:flex;gap:8px;margin-top:6px;flex-wrap:wrap">
        <button class="actBtn">${t.pin}</button>
        <button class="actBtn">${t.map}</button>
        <button class="actBtn link">${t.site}</button>
        <button class="actBtn">${t.status}</button>
      </div>
    </div>`;
  }).join("")}`;
}

/* Modal & lang switch */
document.querySelectorAll(".lang-btn").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll(".lang-btn").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    lang=b.dataset.lang;
    render();
  };
});
$("#modalClose").onclick=()=>$("#modalMask").style.display="none";

render();
</script>
</body>
</html>
